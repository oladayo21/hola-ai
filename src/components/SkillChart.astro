---
interface Props {
	data: { label: string; count: number; color: string }[];
	total: number;
}

const { data, total } = Astro.props;
---

<div class="skill-chart">
	{data.map((item) => {
		const percentage = Math.round((item.count / total) * 100);
		return (
			<div class="skill-bar">
				<div class="skill-label">
					<span class="skill-name">{item.label}</span>
					<span class="skill-count">{item.count} ({percentage}%)</span>
				</div>
				<div class="bar-container">
					<div
						class="bar-fill"
						style={`width: ${percentage}%; background-color: ${item.color};`}
					/>
				</div>
			</div>
		);
	})}
</div>

<style>
	.skill-chart {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		margin: 1.5rem 0;
	}

	.skill-bar {
		display: flex;
		flex-direction: column;
		gap: 0.25rem;
	}

	.skill-label {
		display: flex;
		justify-content: space-between;
		font-size: 0.9rem;
	}

	.skill-name {
		font-weight: 500;
	}

	.skill-count {
		color: var(--sl-color-gray-3);
	}

	.bar-container {
		height: 1.5rem;
		background: var(--sl-color-gray-6);
		border-radius: 0.5rem;
		overflow: hidden;
	}

	.bar-fill {
		height: 100%;
		border-radius: 0.5rem;
		transition: width 0.5s ease;
	}
</style>
